<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="./include/js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="./include/js/jquery.session.min.js"></script>
    <script type="text/javascript" src="./include/js/sweetalert.min.js"></script>
</head>
<body style="background-color: black;">
    <!--<iframe src="#" style="display:block; width:100vw; height: 100vh;"></iframe>-->
    <!--<iframe src="#" style="display:block; width:1280px; height:720px;"></iframe>-->
    
    <script>
        //document.addEventListener("DOMContentLoaded", () => {
        window.onload = function () {
            const link = window.location.href;
            let round = '';
            let hfUrl = '';
            //const link = "https://dev.readinggate.com?info=001104C2200007609|001104C2021001334|https://dev.readinggate.com|Student|Study|402|dev"

            const urlParams = new URL(link).searchParams;
            const info = urlParams.get('info').split('|');

            round = parseInt(info[5]);

            $.session.set('stdid', info[0]);                    // study_id
            $.session.set('sthid', info[1]);                    // studenthistory_id
            $.session.set('url', info[2]);                      // 사이트 주소
            $.session.set('user', info[3].toUpperCase());       // STUDENT ("GUEST", "STAFF")
            $.session.set('mode', info[4].toUpperCase());       // STUDY ("REVIEW")
            $.session.set('book', info[5]);                     // 도서 번호
            $.session.set('server', info[6].toUpperCase());     // 'dev' - 개발서버 or

            if (round >= 301 && round <= 326) {
                hfUrl = "alphabet/default/Default.html";
            }
            else if (round >= 401 && round <= 427) {
                hfUrl = "phonics1/default/Default.html";
            }
            else if (round >= 428 && round <= 450) {
                hfUrl = "phonics2/default/Default.html";
            }
            else if (round >= 501 && round <= 530) {
                hfUrl = "sightwords1/default/Default.html";
            }
            else if (round >= 531 && round <= 560) {
                hfUrl = "sightwords2/default/Default.html";
            }
            else if (round >= 601 && round <= 700) {
                hfUrl = "game/default/Default.html";
            }
            else if (round >= 701 && round <= 850) {
                hfUrl = "songandchant/Default.html";
            } else {
                swal({
                    text: "PreK 학습 리스트 오류!",
                }).then(function () { goToHome(); });
                //this.Page.ClientScript.RegisterStartupScript(this.Page.GetType(), "MessageBox", "swal({ text: 'PreK 학습 리스트 오류!' }).then(function () { goToHome(); });", true);
            }

            location.href = hfUrl;
            //const frame = document.querySelector('iframe'); frame.setAttribute('src', hfUrl);
        };
    </script>
</body>
</html>
